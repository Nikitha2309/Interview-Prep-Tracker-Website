<%- include('partials/header'); -%>
<br>
<br>
<br>
<br>
<br>

<link rel="stylesheet" href="/style_formQuestion.css">
    <div class="panda">
        <div class="ear"></div>
        <div class="face">
          <div class="eye-shade"></div>
          <div class="eye-white">
            <div class="eye-ball"></div>
          </div>
          <div class="eye-shade rgt"></div>
          <div class="eye-white rgt">
            <div class="eye-ball"></div>
          </div>
          <div class="nose"></div>
          <div class="mouth"></div>
        </div>
        <div class="body"> </div>
      </div>

      <form action="/formExperience">
        <div class="hand"></div>
        <div class="hand rgt"></div>
        <h1 style="color: #ff4081;
        font-weight: bolder;
        font-size: 30px;
        font-family: 'Dancing Script', cursive;">Panda Experience</h1>

        <div class="form-group">
          <input type='text' name='name' required="required" class="form-control"/>
          <label class="form-label">Name    </label>
          <div class="name error"></div>
        </div>

        <div class="form-group">
            <input type='text' name='title' required="required" class="form-control"/>
            <label class="form-label">Title  </label>
            <div class="title error"></div>
        </div>

        <div class="form-group">
            <input type="text" name="image"  required="required" class="form-control">
            <label class="form-label">Image  </label>
            <div class="image error"></div>
        </div>

        <div class="form-group">
          
            <select name='company'  required="required" class="form-control">
                <option value='hello'>hello</option>
                <% companys.forEach(function(company) { %>
                    <option value=<%- company._id %>><%- company.name %></option>
                <% }); %>
                <option value='hello'>hell</option>
            </select>
         <div class="company error"></div>
        </div>

        <div class="form-group">
            <input type='text' name='description' required="required" class="form-control"/>
            <label class="form-label">Description </label>
            <div class="description error"></div>
          </div>

        <div class="form-group">

          <button type='submit' class=" btn-default btn-primary fa" style="
          background: #fff;
          padding: 5px;
          width: 150px;
          height: 35px;
          border: 1px solid #ff4081;
          margin-top: 25px;
          cursor: pointer;
          transition: 0.3s;
          box-shadow: 0 50px #ff4081 inset;
          color: #fff;
          "><i class="fa fa-paper-plane"></i> Add </button>

        </div>
      </form>
   
      <script >
        const form = document.querySelector('form');
        const nameError = document.querySelector('.name.error');
        const titleError = document.querySelector('.title.error');
        const companyError = document.querySelector('.company.error');
        const descriptionError = document.querySelector('.description.error');
        form.addEventListener('submit' , async (e) =>{
            e.preventDefault();
            const name = form.name.value;
            const title = form.title.value;
            const image = form.image.value;
            const company = form.company.value;
            const description = form.description.value;
            nameError.textContent = '';
            titleError.textContent = '';
            imageError.textContent='';
            companyError.textContent = '';
            descriptionError.textContent = '';
            try {
                    const res = await fetch('/formExperience', {
                        method: 'POST',
                        body: JSON.stringify({name,title,company,description}),
                        headers: {'Content-Type':'application/json'}
                    });
                const data = await res.json();
                if(data.errors){
                    nameError.textContent = data.errors.name;
                    titleError.textContent = data.errors.link;
                    imageError.textContent=data.errors.image;
                    companyError.textContent = data.errors.topic;
                    descriptionError.textContent=data.errors.description;
                }

                alert('done vro ;) thanks for contribuition :/ ');
               location.assign('/');
            
            } catch (error) {
                console.log(error);
            }
            });
    
               </script>


<%- include('partials/footer'); -%>



